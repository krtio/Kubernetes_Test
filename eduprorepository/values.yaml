deployments:
  - name: app1
    replicaCount: 2
    namespace: prod
    image:
      repository: 545009833003.dkr.ecr.ap-northeast-2.amazonaws.com/eduproproduction
      tag: v16
      pullPolicy: Always
    imagePullSecrets:
      - ecr-regcred
    serviceAccount:
      create: true
      automount: true
      annotations: {}
      name: ""
    service:
      type: NodePort
      port: 80
      nodePort: 30080
    resources: {}
    autoscaling:
      enabled: false
      minReplicas: 1
      maxReplicas: 100
      targetCPUUtilizationPercentage: 80
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 1
        maxSurge: 1

  - name: app2
    replicaCount: 3
    namespace: prod
    image:
      repository: 545009833003.dkr.ecr.ap-northeast-2.amazonaws.com/eduproproduction
      tag: v16
      pullPolicy: Always
    imagePullSecrets:
      - ecr-regcred
    serviceAccount:
      create: true
      automount: true
      annotations: {}
      name: ""
    service:
      type: NodePort
      port: 81
      nodePort: 30081
    resources: {}
    autoscaling:
      enabled: false
      minReplicas: 1
      maxReplicas: 100
      targetCPUUtilizationPercentage: 80
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 1
        maxSurge: 1

  - name: app3
    replicaCount: 2
    namespace: prod
    image:
      repository: 545009833003.dkr.ecr.ap-northeast-2.amazonaws.com/eduproproduction
      tag: v16
      pullPolicy: Always
    imagePullSecrets:
      - ecr-regcred
    serviceAccount:
      create: true
      automount: true
      annotations: {}
      name: ""
    service:
      type: NodePort
      port: 82
      nodePort: 30082
    resources: {}
    autoscaling:
      enabled: false
      minReplicas: 1
      maxReplicas: 100
      targetCPUUtilizationPercentage: 80
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 1
        maxSurge: 1

  - name: app4
    replicaCount: 2
    namespace: prod
    image:
      repository: 545009833003.dkr.ecr.ap-northeast-2.amazonaws.com/eduproproduction
      tag: v16
      pullPolicy: Always
    imagePullSecrets:
      - ecr-regcred
    serviceAccount:
      create: true
      automount: true
      annotations: {}
      name: ""
    service:
      type: NodePort
      port: 83
      nodePort: 30083
    resources: {}
    autoscaling:
      enabled: false
      minReplicas: 1
      maxReplicas: 100
      targetCPUUtilizationPercentage: 80
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 1
        maxSurge: 1

  - name: app5
    replicaCount: 2
    namespace: prod
    image:
      repository: 545009833003.dkr.ecr.ap-northeast-2.amazonaws.com/eduproproduction
      tag: v16
      pullPolicy: Always
    imagePullSecrets:
      - ecr-regcred
    serviceAccount:
      create: true
      automount: true
      annotations: {}
      name: ""
    service:
      type: NodePort
      port: 84
      nodePort: 30084
    resources: {}
    autoscaling:
      enabled: false
      minReplicas: 1
      maxReplicas: 100
      targetCPUUtilizationPercentage: 80
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 1
        maxSurge: 1

# 공용 LoadBalancer 추가 (모든 서비스 트래픽을 분배)
loadBalancer:
  enabled: true
  name: msa-loadbalancer
  namespace: prod
  ports:
    - port: 80
      targetPort: 30080
    - port: 81
      targetPort: 30081
    - port: 82
      targetPort: 30082
    - port: 83
      targetPort: 30083
    - port: 84
      targetPort: 30084
